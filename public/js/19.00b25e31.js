(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0442":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[[n("div",[n("q-table",{class:"ios"===e.is_mobile?"my-sticky-dynamic table-top-ios":"android"===e.is_mobile?"my-sticky-dynamic table-top-android":"my-sticky-dynamic",attrs:{title:"FUEL",data:e.fuelList,columns:"user"!==e.userLevel?e.columns_admin:e.columns,"row-key":"card_no",pagination:e.pagination,filter:e.filter,"binary-state-sort":"","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0]},on:{"update:pagination":function(t){e.pagination=t},request:e.getFuels,"virtual-scroll":e.onScroll},scopedSlots:e._u([{key:"top-left",fn:function(){return[n("div",{staticClass:"items-center"},[n("q-btn",{staticStyle:{width:"130px",height:"40px"},attrs:{rounded:"",dense:"","no-caps":"",label:"+Add Fuel",color:"blue-7"},on:{click:function(t){return e.createNew()}}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[n("q-input",{staticClass:"q-mb-sm",staticStyle:{width:"130px"},attrs:{dense:"",debounce:"300",placeholder:"Search","input-class":"text-white border-white",color:"blue-7"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search",color:"white"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t},nativeOn:{click:function(n){return e.goToDetail(t.row.id)}}},[n("q-td",{key:"no",attrs:{props:t}},[e._v(e._s(t.row.index))]),n("q-td",{key:"depot_location",attrs:{props:t}},[e._v(e._s(t.row.user.depot_location))]),n("q-td",{key:"driver_name",attrs:{props:t}},[e._v(e._s(t.row.driver?t.row.driver.driver_name:""))]),n("q-td",{key:"card_no",attrs:{props:t}},[e._v(e._s(t.row.card_no))]),n("q-td",{key:"company",attrs:{props:t}},[e._v(e._s(t.row.company))]),"user"!==e.userLevel?n("q-td",{key:"user_name",attrs:{props:t}},[e._v(e._s(t.row.user.name))]):e._e()],1)]}},{key:"bottom",fn:function(){return[n("div",{staticClass:"col-12 row justify-end items-center"},[e._v("\n            Total Records: "+e._s(e.pagination.rowsNumber)+"\n            ")])]},proxy:!0}])})],1)]],2)},i=[],r=n("a34a"),o=n.n(r),s=(n("96cf"),n("c973")),l=n.n(s),c=n("1e53"),u=n("f508"),d={name:"FuelList",data:function(){return{filter:"",pagination:{sortBy:"card_no",descending:!1,page:1,rowsPerPage:100,rowsNumber:20},columns:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"depot_location",required:!0,label:"DEPOT LOCATION",align:"left",field:"depot_location"},{name:"driver_name",required:!0,label:"DRIVER NAME",align:"left",field:"driver_name"},{name:"card_no",required:!0,label:"CARD NO",align:"left",field:"card_no"},{name:"company",required:!0,label:"COMPANY",align:"left",field:"company"}],columns_admin:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"depot_location",required:!0,label:"DEPOT LOCATION",align:"left",field:"depot_location"},{name:"driver_name",required:!0,label:"DRIVER NAME",align:"left",field:"driver_name"},{name:"card_no",required:!0,label:"CARD NO",align:"left",field:"card_no"},{name:"company",required:!0,label:"COMPANY",align:"left",field:"company"},{name:"user_name",required:!0,label:"USER",align:"left",field:"user_name"}],fuelList:[],is_mobile:"web",isNewRecord:!0}},computed:{userLevel:{get:function(){return this.$store.state.auth.userLevel}}},mounted:function(){this.checkPlatform(),this.$store.commit("auth/pageTitle",this.$router.currentRoute.meta.title),this.getFuels({pagination:this.pagination,filter:void 0})},methods:{checkPlatform:function(){this.$q.platform.is.mobile?this.$q.platform.is.ios?this.is_mobile="ios":this.is_mobile="android":this.is_mobile="web"},createNew:function(){this.$router.push({name:"New Fuel"})},goToDetail:function(e){this.$router.push({name:"Fuel Details",params:{id:e}})},onScroll:function(e){var t=this;return l()(o.a.mark((function n(){var a,i,r,s,l,c,u;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.index,e.from,e.to,e.ref,i=t.pagination,r=i.page,s=i.rowsPerPage,l=i.rowsNumber,c=t.fuelList.length-1,u=Math.ceil(l/s),!(a>0&&r<u&&a===c)){n.next=8;break}return t.pagination.page++,n.next=8,t.getFuels({pagination:t.pagination,filter:t.filter,isScroll:!0});case 8:case"end":return n.stop()}}),n)})))()},getFuels:function(){var e=l()(o.a.mark((function e(t){var n,a,i,r,s,l,d,p,f,m,g,h;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pagination,a=n.page,i=n.rowsPerPage,r=n.rowsNumber,s=n.sortBy,l=n.descending,d=t.filter,p=t.isScroll,f=0===i?r:i,m=(a-1)*i,g={conditions:{},start:m,numPerPage:f,sortBy:s,descending:l},d&&(g.conditions.filter=d),u["a"].show(),e.prev=8,e.next=11,c["a"].getFuels(g);case 11:h=e.sent,u["a"].hide(),h.data.data.forEach((function(e,t){e.index=10*(a-1)+t+1})),this.fuelList=p?this.fuelList.concat(h.data.data):h.data.data,this.pagination.rowsNumber=h.data.totalCount,this.pagination.page=a,this.pagination.rowsPerPage=i,this.pagination.sortBy=s,this.pagination.descending=l,e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),u["a"].hide();case 25:case"end":return e.stop()}}),e,this,[[8,22]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){}},p=d,f=(n("7e32"),n("2877")),m=n("9989"),g=n("eaac"),h=n("9c40"),_=n("27f9"),b=n("0016"),w=n("bd08"),y=n("db86"),v=n("eebe"),k=n.n(v),q=Object(f["a"])(p,a,i,!1,null,null,null);t["default"]=q.exports;k()(q,"components",{QPage:m["a"],QTable:g["a"],QBtn:h["a"],QInput:_["a"],QIcon:b["a"],QTr:w["a"],QTd:y["a"]})},"1c87":function(e,t,n){},"7e32":function(e,t,n){"use strict";var a=n("1c87"),i=n.n(a);i.a}}]);