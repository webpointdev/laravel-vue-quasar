(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"1f5c":function(e,t,r){},d1ba:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[[r("div",[r("q-table",{class:"ios"===e.is_mobile?"my-sticky-dynamic table-top-ios":"android"===e.is_mobile?"my-sticky-dynamic table-top-android":"my-sticky-dynamic",attrs:{title:"DRIVERS",data:e.driverList,columns:"DPD"!==e.userSubcontractor?"user"!==e.userLevel?e.columns_admin:e.columns:e.columns_dpd,"row-key":"driver_name",pagination:e.pagination,filter:e.filter,"binary-state-sort":"","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0]},on:{"update:pagination":function(t){e.pagination=t},request:e.getDrivers,"virtual-scroll":e.onScroll},scopedSlots:e._u([{key:"top-left",fn:function(){return[r("div",{staticClass:"items-center"},[r("q-btn",{staticStyle:{width:"130px",height:"40px"},attrs:{rounded:"",dense:"","no-caps":"",label:"+Add Driver",color:"blue-7"},on:{click:function(t){return e.createNew()}}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[r("q-select",{staticClass:"q-select-list",staticStyle:{"min-width":"130px"},attrs:{dense:"",options:e.driverNames,"option-value":function(e){return null==e?null:e},"option-label":function(e){return null==e?"- Null -":e.driver_name},"bg-color":"transparent",color:"blue-7",label:"DRIVER","label-color":"white",behavior:"menu"},on:{input:e.onChangeDriver},scopedSlots:e._u([e.selectedDriver?{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer text-white",attrs:{name:"cancel"},on:{click:[function(t){t.stopPropagation(),e.selectedDriver=null},e.onChangeDriver]}})]},proxy:!0}:null],null,!0),model:{value:e.selectedDriver,callback:function(t){e.selectedDriver=t},expression:"selectedDriver"}})]},proxy:!0},{key:"body",fn:function(t){return[t.row.user?r("q-tr",{attrs:{props:t},nativeOn:{click:function(r){return e.goToDetail(t.row.id)}}},[r("q-td",{key:"no",attrs:{props:t}},[e._v(e._s(t.row.index))]),r("q-td",{key:"driver_name",attrs:{props:t}},[e._v(e._s(t.row.driver_name))]),r("q-td",{key:"phone",attrs:{props:t}},[e._v(e._s(t.row.phone))]),r("q-td",{key:"email",attrs:{props:t}},[e._v(e._s(t.row.email))]),r("q-td",{key:"pay_amount",attrs:{props:t}},[e._v(e._s("Â£"+t.row.pay_amount))]),"DPD"!==e.userSubcontractor?r("q-td",{key:"depot_location",attrs:{props:t}},[e._v(e._s(t.row.user?t.row.user.depot_location:""))]):e._e(),"user"!==e.userLevel?r("q-td",{key:"user_name",attrs:{props:t}},[e._v(e._s(t.row.user?t.row.user.name:""))]):e._e()],1):e._e()]}},{key:"bottom",fn:function(){return[r("div",{staticClass:"col-12 row justify-end items-center"},[e._v("\n            Total Records: "+e._s(e.pagination.rowsNumber)+"\n          ")])]},proxy:!0}])})],1)]],2)},n=[],i=r("a34a"),o=r.n(i),l=(r("96cf"),r("c973")),s=r.n(l),c=r("1e53"),u=r("f508"),d={name:"DriverList",data:function(){return{filter:"",pagination:{sortBy:"driver_name",descending:!1,page:1,rowsPerPage:100,rowsNumber:20},columns:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"driver_name",required:!0,label:"FULL NAME",align:"left",field:"driver_name"},{name:"phone",required:!0,label:"MOBILE",align:"left",field:"phone"},{name:"email",required:!0,label:"E-MAIL",align:"left",field:"email"},{name:"pay_amount",required:!0,label:"PAYMENT",align:"left",field:"pay_amount"},{name:"depot_location",required:!0,label:"DEPOT LOCATION",align:"left",field:"depot_location"}],columns_dpd:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"driver_name",required:!0,label:"FULL NAME",align:"left",field:"driver_name"},{name:"phone",required:!0,label:"MOBILE",align:"left",field:"phone"},{name:"email",required:!0,label:"E-MAIL",align:"left",field:"email"},{name:"pay_amount",required:!0,label:"PAYMENT",align:"left",field:"pay_amount"}],columns_admin:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"driver_name",required:!0,label:"FULL NAME",align:"left",field:"driver_name"},{name:"phone",required:!0,label:"MOBILE",align:"left",field:"phone"},{name:"email",required:!0,label:"E-MAIL",align:"left",field:"email"},{name:"pay_amount",required:!0,label:"PAYMENT",align:"left",field:"pay_amount"},{name:"depot_location",required:!0,label:"DEPOT LOCATION",align:"left",field:"depot_location"},{name:"user_name",required:!0,label:"USER",align:"left",field:"user_name"}],driverList:[],driverNames:[],selectedDriver:null,dialogTitle:"",is_mobile:"web",isNewRecord:!0}},computed:{userLevel:{get:function(){return this.$store.state.auth.userLevel}},userSubcontractor:{get:function(){return this.$store.state.auth.userSubcontractor}}},mounted:function(){var e=this;return s()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkPlatform(),e.$store.commit("auth/pageTitle",e.$router.currentRoute.meta.title),t.next=4,e.getDriverAll();case 4:e.getDrivers({pagination:e.pagination,filter:void 0});case 5:case"end":return t.stop()}}),t)})))()},methods:{checkPlatform:function(){this.$q.platform.is.mobile?this.$q.platform.is.ios?this.is_mobile="ios":this.is_mobile="android":this.is_mobile="web"},createNew:function(){this.$router.push({name:"New Driver"})},goToDetail:function(e){this.$router.push({name:"Driver Details",params:{id:e}})},getDriverAll:function(){var e=s()(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getDriverList();case 3:t=e.sent,this.driverNames=t.data.data,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),onScroll:function(e){var t=this;return s()(o.a.mark((function r(){var a,n,i,l,s,c,u;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.index,e.from,e.to,e.ref,n=t.pagination,i=n.page,l=n.rowsPerPage,s=n.rowsNumber,c=t.driverList.length-1,u=Math.ceil(s/l),!(a>0&&i<u&&a===c)){r.next=8;break}return t.pagination.page++,r.next=8,t.getDrivers({pagination:t.pagination,isScroll:!0});case 8:case"end":return r.stop()}}),r)})))()},onChangeDriver:function(){this.getDrivers({pagination:this.pagination,isScroll:!1})},getDrivers:function(){var e=s()(o.a.mark((function e(t){var r,a,n,i,l,s,d,p,m,f,v;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.pagination,a=r.page,n=r.rowsPerPage,i=r.rowsNumber,l=r.sortBy,s=r.descending,t.filter,d=t.isScroll,p=0===n?i:n,m=(a-1)*n,f={conditions:{},start:m,numPerPage:p,sortBy:l,descending:s},this.selectedDriver&&(f.conditions.driver_name=this.selectedDriver.driver_name),u["a"].show(),e.prev=8,e.next=11,c["a"].getDrivers(f);case 11:v=e.sent,u["a"].hide(),v.data.data.forEach((function(e,t){e.index=10*(a-1)+t+1})),this.driverList=d?this.driverList.concat(v.data.data):v.data.data,this.pagination.rowsNumber=v.data.totalCount,this.pagination.page=a,this.pagination.rowsPerPage=n,this.pagination.sortBy=l,this.pagination.descending=s,e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),u["a"].hide();case 25:case"end":return e.stop()}}),e,this,[[8,22]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){}},p=d,m=(r("d9fe"),r("2877")),f=r("9989"),v=r("eaac"),g=r("9c40"),h=r("ddd8"),b=r("0016"),_=r("27f9"),w=r("bd08"),y=r("db86"),D=r("24e8"),q=r("f09f"),k=r("d847"),L=r("05c0"),x=r("eb85"),N=r("a370"),P=r("0378"),E=r("4b7e"),S=r("7f67"),Q=r("eebe"),T=r.n(Q),A=Object(m["a"])(p,a,n,!1,null,null,null);t["default"]=A.exports;T()(A,"components",{QPage:f["a"],QTable:v["a"],QBtn:g["a"],QSelect:h["a"],QIcon:b["a"],QInput:_["a"],QTr:w["a"],QTd:y["a"],QDialog:D["a"],QCard:q["a"],QBar:k["a"],QTooltip:L["a"],QSeparator:x["a"],QCardSection:N["a"],QForm:P["a"],QCardActions:E["a"]}),T()(A,"directives",{ClosePopup:S["a"]})},d9fe:function(e,t,r){"use strict";var a=r("1f5c"),n=r.n(a);n.a}}]);