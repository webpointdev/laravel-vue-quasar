(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{af0d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"q-mt-none",staticStyle:{"background-color":"#3E444E"}},[[r("div",[r("div",[r("q-bar",{staticStyle:{"background-color":"#3E444E"}},[r("q-btn",{attrs:{dense:"",flat:"",icon:"close",color:"white"},on:{click:function(t){return e.$router.push("/dashboard/fuels")}}}),r("div",{staticClass:"text-h6 text-white"},[e._v(e._s(e.isNewPage?"Add Fuel":"Edit Fuel"))])],1)],1),r("div",{staticClass:"q-px-md",staticStyle:{"background-color":"#3E444E"}},[r("q-form",{ref:"fuelForm",staticClass:"text-center q-px-md",staticStyle:{"max-width":"400px",width:"100%",margin:"auto"},attrs:{model:e.fuel},on:{submit:e.onSubmit}},[r("q-card",{staticStyle:{"background-color":"#3E444E","box-shadow":"none"}},[r("q-card-section",{staticClass:"text-left q-py-none"},[r("span",{staticClass:"text-white"},[e._v("Driver Name")]),r("q-select",{staticClass:"q-ma-none q-pb-md",attrs:{dense:"",required:"",outlined:"","use-input":"","hide-selected":"","fill-input":"",options:e.filteredDrivers,"option-value":function(e){return null===e?null:e.id},"option-label":function(e){return null===e?"- Null -":e.driver_name},"emit-value":"","map-options":"","label-color":"grey-7",behavior:"menu","bg-color":"white","input-class":"text-black","hide-dropdown-icon":!0,color:"blue-7"},on:{filter:e.filterFnDrivers},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.fuel.driver_id?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(t){return e.removeSelectedDriver()}}}):e._e()]},proxy:!0}]),model:{value:e.fuel.driver_id,callback:function(t){e.$set(e.fuel,"driver_id",t)},expression:"fuel.driver_id"}})],1),r("q-card-section",{staticClass:"text-left q-py-none"},[r("span",{staticClass:"text-white"},[e._v("Card No")]),r("q-input",{staticClass:"q-pb-md",attrs:{dense:"",outlined:"",required:"","bg-color":"white",color:"blue-7","input-class":"text-black text-center"},model:{value:e.fuel.card_no,callback:function(t){e.$set(e.fuel,"card_no",t)},expression:"fuel.card_no"}})],1),r("q-card-section",{staticClass:"text-left q-py-none"},[r("span",{staticClass:"text-white"},[e._v("Company")]),r("q-input",{staticClass:"q-pb-md",attrs:{dense:"",outlined:"",required:"","bg-color":"white",color:"blue-7","input-class":"text-black text-center"},model:{value:e.fuel.company,callback:function(t){e.$set(e.fuel,"company",t)},expression:"fuel.company"}})],1),r("q-card-actions",{attrs:{align:"center"}},[r("div",{staticClass:"q-px-md"},[e.isNewPage?e._e():r("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{"no-caps":"",dense:"",rounded:"",label:"Delete",color:"blue-7"},on:{click:e.remove}}),e._v(" Â \n                "),r("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{color:"blue-7",label:e.isNewPage?"Add New":"Update","no-caps":"",dense:"",rounded:"",type:"submit"}})],1)])],1)],1)],1)])]],2)},n=[],s=(r("7514"),r("a34a")),i=r.n(s),o=(r("96cf"),r("c973")),c=r.n(o),u=r("f508"),l=(r("bd4c"),r("1e53")),d={name:"NewFuel",data:function(){return{fuel:{id:"",driver_id:"",card_no:"",company:""},isNewPage:!1,drivers:[],filteredDrivers:[]}},created:function(){var e=this;return c()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("auth/pageTitle",e.$router.currentRoute.meta.title),e.isNew(),t.next=4,e.getDriverList("");case 4:if(e.isNewPage){t.next=8;break}return e.filteredDrivers=e.drivers,t.next=8,e.getFuelInfo(e.fuel.id);case 8:case"end":return t.stop()}}),t)})))()},computed:{user:{get:function(){return this.$store.state.auth.user}},userLevel:{get:function(){return this.$store.state.auth.userLevel}}},methods:{isNew:function(){null!==this.$router.currentRoute.params.id&&void 0!==this.$router.currentRoute.params.id&&""!==this.$router.currentRoute.params.id?(this.isNewPage=!1,this.fuel.id=this.$router.currentRoute.params.id):this.isNewPage=!0},getDriverList:function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getDriversByUserID();case 3:t=e.sent,this.drivers=t.data.data,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),getFuelInfo:function(){var e=c()(i.a.mark((function e(t){var r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u["a"].show(),e.prev=1,e.next=4,l["a"].getFuelInfo(t);case 4:r=e.sent,this.fuel=r.data.data,console.log("fuel details",r.data.data),u["a"].hide(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),u["a"].hide(),this.$router.push("/dashboard/fuels");case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=this;return c()(i.a.mark((function t(){var r,a,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isNewPage){t.next=17;break}return u["a"].show(),t.prev=2,t.next=5,l["a"].createFuel(e.fuel);case 5:r=t.sent,console.log("res",r.data),u["a"].hide(),e.$q.notify({color:"positive",textColor:"white",position:"top",message:"Fuel is registered successfully"}),e.$router.push("/dashboard/fuels"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),u["a"].hide();case 15:t.next=33;break;case 17:return a={data:e.fuel},a.conditions={id:e.fuel.id},u["a"].show(),t.prev=20,t.next=23,l["a"].updateFuel(a);case 23:n=t.sent,u["a"].hide(),console.log("result",n.data),t.next=32;break;case 28:t.prev=28,t.t1=t["catch"](20),u["a"].hide(),console.log("error",t.t1);case 32:e.$router.push("/dashboard/fuels");case 33:case"end":return t.stop()}}),t,null,[[2,12],[20,28]])})))()},remove:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Are you surely remove "+this.fuel.card_no+"?",cancel:!0,persistent:!0}).onOk(c()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={conditions:{id:e.fuel.id}},u["a"].show(),t.prev=2,t.next=5,l["a"].removeFuel(r);case 5:a=t.sent,u["a"].hide(),console.log("remove result",a),e.$q.notify({color:"positive",position:"top",message:e.fuel.card_no+" is removed successfully !"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),u["a"].hide();case 14:e.$router.push("/dashboard/fuels");case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).onCancel((function(){})).onDismiss((function(){}))},filterFnDrivers:function(e,t,r){var a=this;t((function(){if(""===e)a.filteredDrivers=[];else{var t=e.toLowerCase();a.filteredDrivers=a.drivers.filter((function(e){return e.driver_name.toLowerCase().indexOf(t)>-1}))}}),(function(t){if(""!==e&&t.options.length>0){var r=t.options.find((function(t){return t.driver_name.toLowerCase()===e.toLowerCase()}));r&&t.add(r)}}))},removeSelectedDriver:function(){this.fuel.driver_id=""}}},f=d,p=r("2877"),h=r("9989"),v=r("d847"),m=r("9c40"),w=r("0378"),b=r("f09f"),x=r("a370"),g=r("ddd8"),q=r("0016"),k=r("27f9"),y=r("4b7e"),C=r("eebe"),_=r.n(C),$=Object(p["a"])(f,a,n,!1,null,null,null);t["default"]=$.exports;_()($,"components",{QPage:h["a"],QBar:v["a"],QBtn:m["a"],QForm:w["a"],QCard:b["a"],QCardSection:x["a"],QSelect:g["a"],QIcon:q["a"],QInput:k["a"],QCardActions:y["a"]})}}]);